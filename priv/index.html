<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Chatterbox: HTTP/2 for Erlang</title>

		<meta name="description" content="An Introduction to HTTP/2 and the code that implements it">
		<meta name="author" content="Joe DeVivo">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/abba.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Take a Chance<br/>on HTTP</h1>
					<h3>Chatterbox: HTTP/2 for Erlang</h3>
					<img src="./img/crown.png" style="border:0px"/>
					<p>
						<small>Joe DeVivo / <a href="http://twitter.com/joedevivo">@joedevivo</a></small>
					</p>
					<center>
						<div style="height: 3px; width:100px; background: #b89c30; align: center;"></div>
					</center>
				</section>

				<section>
					<h2>HTTP/0.9</h2>
					<p>On the scene in 1991</p>
					<ul>
						<li>Single Line Request: GET /&lt;path&gt;</li>
						<li>Request ends on CRLF</li>
						<li>Only responds with HTML ASCII</li>
						<li>When that's done, Connection over</li>
					</ul>
					<aside class="notes">
						I would have read the spec, but I was busy being 15 and not willing to pay the $5/mo my ISP wanted for "world wide web".
						I had gopher included for free anyway!
					</aside>
				</section>

				<section>
					<p>HTTP/0.9 Is still out there!</p>
					<p>tl;dr - ask for an HTML file and you'll get one</p>
				</section>

				<section>
					<h2>HTTP/1.0</h2>
					<p>
						1996 - <a href="http://tools.ietf.org/html/rfc1945">RFC-1945: HTTP/1.0</a>
					</p>
					<p> New Features! </p>
					<ul>
						<li>HEADERS! Request and Response</li>
						<li>Response Codes</li>
						<li>Serves file types other than HTML</li>
					</ul>

				</section>
				<section>
					<h2>HTTP/1.0 Lifecycle</h2>
					<ul>
						<li>Request headers separated by CRLF</li>
						<li>2x CRLF means request is done</li>
						<li>Status Code as first line of response</li>
						<li>Response headers separated by CRLF</li>
						<li>Connection closed after every request</li>
					</ul>

					<aside class="notes">
						This is the first really real spec. I'd written HTML by this point, which I guess means I've used HTTP/0.9
						What, you didn't write HTML freshman year?
					</aside>
				</section>

				<section>
					<h2>HTTP/1.0</h2>
					<p>It really wasn't a standard</p>
					<aside class="notes">
						Kind of a reverse spec of everything that was already happening. Supporting non-HTML files took the "HT" out of "HTTP"
					</aside>
				</section>

				<section>
					<h2>HTTP/1.1</h2>
					<p>
						1999 - <a href="http://tools.ietf.org/html/rfc2616">RFC-2616: HTTP/1.1</a>
					</p>
					<p>New Features</p>
					<ul>
						<li>Keepalive Connections</li>
						<li>Chunked responses</li>
						<li>Request Pipelining</li>
						<li>Byte-Range Requests</li>
						<li>Transfer Encodings</li>
						<li>Close connection with 'Connection: close' header</li>
						<li>Negotiation of: charsets, caching, language, encoding, and more</li>
					</ul>

					<aside class="notes">
						Pipelining is not without it's problems
					</aside>
				</section>

				<section>
					<section>
						<h2>HTTP/1.1 Lifecycle</h2>
						<p>More Complex</p>
					</section>
					<section>
						<h2>HTTP/1.1 Request</h2>
						<ul>
							<li>Still Plaintext</li>
							<li>Still one header per line</li>
							<li>Still 2x CRLF to terminate</li>
						</ul>
					</section>
					<section>
						<h2>HTTP/1.1 Response</h2>
						<ul>
							<li>Still starts with a response code</li>
							<li>Still has one response header per line</li>
						</ul>
					</section>
					<section>
						<h2>Possible Chuncked Response Data</h2>
					</section>
					<section>
						<h2>Connection not closed!</h2>
					</section>
					<section>
						<h2>HTTP/1.1 tl;dr</h2>
						<ul>
						<li>Request</li>
						<li>Response</li>
						<li>Repeat</li>
						</ul>
					</section>
				</section>

				<section>
					<h2>Side note on HTTP/1.0</h2>
					<p>Keepalive connections were backported to HTTP/1.0, but it's disabled by defaul</p>
				</section>

				<section>
					<section>
						<h2>On HTTP/1.1's TCP Useage</h2>
					</section>
					<section>
						<h2>It uses less connections because 'Keepalive'</h2>
						<p>That's good!</p>
					</section>
					<section>
						<h2>It sequentially sends requests and receives responses in order via Pipelining</h2>
						<p>That's bad!</p>
						<p>Well, sometimes. Be responsible</p>
					</section>
					<section>
						<h2>Head of line Blocking</h2>
						<ul>
							<li>Pipelining lets you send another request before the first one responds</li>
							<li>It will not respond until the first response is fully served</li>
							<li>Most browsers disable pipelining by default</li>
						</ul>
					</section>
				</section>

				<section>
					<h2>Transfer Sizes</h2>
					<h2>Dec/2010 - Apr/2015</h2>
					<img src="./img/chart2.png"/>
					<p>Transfer sizes and quantities are going UP!</p>
				</section>

				<section>
					<h2>HTTP/1.1 Spec is HUGE</h2>
					<p>In 2014's special edition remaster, HTTP/1.1 was split into SIX RFCs totaling over 292 pages</p>
				</section>

				<section>
					<h2>Many HTTP/1.1 Features are OPTIONAL</h2>
					<p>Like Pipelining</p>
					<p>Very rare to find a single product implementing the full feature set</p>
					<aside class="notes">
						that means a lot software talking to each other, that have different feature sets
					</aside>
				</section>

				<section>
					<h2>Performance Hacks</h2>
					<ul>
						<li>Spriting</li>
						<li>Inlining</li>
						<li>Concatenation</li>
						<li>Sharding</li>
					</ul>
				</section>

				<section>
					<h2>SPDY</h2>
					<p>Google tried to fix this and pretty much proved it could work</p>
				</section>

				<section>
					<h2>s/SPDY\/3/http2 draft-00</h2>
					<p>One day, the SPDY/3 draft became the HTTP/2 draft</p>
				</section>

				<section>
					<h2>HTTP/2</h2>
					<p>
						2015 - <a href="http://tools.ietf.org/html/rfc7540">RFC 7540</a>
					</p>

					<ul>
						<li>You can keep your semantics</li>
						<li>Binary Protocol</li>
						<li>Header Compression</li>
						<li>Frames</li>
						<li>Mulitplexing</li>
						<li>Flow Control</li>
						<li>Prioritization (Maybe?)</li>
						<li>Server Push</li>
						<li>Upgrading HTTP/1 requests</li>
					</ul>
				</section>

				<section>
					<h2>Keep your semantics</h2>
					<ul>
						<li>methods: GET, POST, and Friends</li>
						<li>Headers!</li>
						<li>Requests</li>
						<li>Responses</li>
						<li>if you did it before, it should still work</li>
					</ul>
				</section>

				<section>
					<section>
						<h2>Binary Protocol</h2>
						<ul>
							<li>Bye Bye Telnet</li>
							<li>Bleep blorp</li>
							<li>Binaries make the spec less ambigous</li>
						</ul>
					</section>
					<section>
						<h2>Binaries =:= Happy Erlangers</h2>
					</section>
				</section>

				<section>
					<section>
						<h2>Header Compression</h2>
						<ul>
							<li>Stateless protocols are repetitive</li>
							<li>HTTP is stateless</li>
						</ul>
					</section>
					<section>
						<h2>Compression Context is Stateful</h2>
						<p>
							By having a stateful context for compression, you can send the same header 100 times over a connection, but after the first time the client and server will have agreed on a much smaller binary value.
						</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Frames</h2>
						<pre>
+-----------------------------------------------+
|                 Length (24)                   |
+---------------+---------------+---------------+
|   Type (8)    |   Flags (8)   |
+-+-------------+---------------+-------------------------------+
|R|                 Stream Identifier (31)                      |
+=+=============================================================+
|                   Frame Payload (0...)                      ...
+---------------------------------------------------------------+
						</pre>
					</section>
					<section>
						<h2>Type</h2>
						<p>One of 10 frame types. Each has rules for payload sizes, payload content and which flags can be set.</p>
					</section>
					<section>
						<h2>Flags</h2>
						<p>A few control bits that have different uses for different frame types</p>
					</section>
					<section>
						<h2>R</h2>
						<p>A shoutout to pirates</p>
					</section>
					<section>
						<h2>Stream Identifier</h2>
						<p>Which multiplexed stream this frame is for</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Frame Types</h2>
					</section>
					<section>
						<h2>DATA</h2>
						<p>Request and Response Bodies are made of these</p>
					</section>
					<section>
						<h2>HEADERS</h2>
						<p>Request and Response Headers start with these</p>
					</section>
					<section>
						<h2>PRIORITY</h2>
						<p>Sent to change a stream's priority</p>
					</section>
					<section>
						<h2>RST_STREAM</h2>
						<p>Sent to give up on a stream</p>
					</section>
					<section>
						<h2>SETTINGS</h2>
						<p>Negotiates overall connection settings</p>
					</section>
					<section>
						<h2>PUSH_PROMISE</h2>
						<p>Headers for a response for which there was no request</p>
					</section>
					<section>
						<h2>PING</h2>
						<p>measuring round trip</p>
					</section>
					<section>
						<h2>GOAWAY</h2>
						<p>We're done here. Could be an error, could just be natual causes</p>
					</section>
					<section>
						<h2>WINDOW_UPDATE</h2>
						<p>Issues a credit for flow control</p>
					</section>
					<section>
						<h2>CONTINUATION</h2>
						<p>PUSH_PROMISE and HEADERS are the first frame of headers, but if they're too big to fit in one frame, the rest comes over in CONTINUATION frames. When a frame comes over with the END_HEADERS flag set, we know it's over</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Multiplexing: Pipelining done right</h2>
						<p>A frame's stream identifier determines which multiplexed stream it belongs to</p>
					</section>
					<section>
						<h2>Streams</h2>
						<p>
					</section>
				</section>

				<section>
					<section>
						<h2>Upgrading HTTP1 Requests</h2>
					</section>
					<section>
						<h2>https://</h2>
						<p>Uses TLS's "Next Protocol Negotiation"</p>
						<p>Or TLS's "Application Layer Protocol Negotiation"</p>
					</section>
					<section>
						<h2>http://</h2>
						<p>Uses "Upgrade: " header. HTTP/2 servers respond with status code </p>
						<pre>101 Switching</pre>
					</section>
				</section>

				<section>
					<h2>I'm the first in line</h2>
					<p>
						<img src="./img/http1con.png" style="border:none"/>
					</p>
					<aside class="notes">
						Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
					</aside>
				</section>

				<section>
					<h2>If you need me let me know</h2>
					<h2>Gonna be around</h2>
					<p>
						<img src="./img/http2con.png" style="border:none"/>
					</p>
					<aside class="notes">
						Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
					</aside>
				</section>

				<section>
					<section>
						<h2>References</h2>
					</section>
					<section>
						<h2>HTTP History References</h2>
						<ul>
							<li><a href="http://http2.github.io/faq/">HTTP/2 Official FAQ</a></li>
							<li><a href="http://daniel.haxx.se/http2/">HTTP2 Explained - Daniel Stenberg</a></li>
							<li><a href="http://chimera.labs.oreilly.com/books/1230000000545/ch09.html">High Performance Browser Networking  - Ilya Grigorik</a></li>
						</ul>
					</section>
					<section>
						<h2>HTTP/1.x RFCs</h2>
						<ul>
							<li><a href="http://tools.ietf.org/html/rfc1945">RFC 1945 - HTTP/1.0</a></li>
							<li><a href="http://tools.ietf.org/html/rfc2616">RFC 2616 - HTTP/1.1</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7230">RFC 7230 - HTTP/1.1: Message Syntax and Routing</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7231">RFC 7231 - HTTP/1.1: Semantics and Content</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7232">RFC 7232 - HTTP/1.1: Conditional Requests</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7233">RFC 7233 - HTTP/1.1: Range Requests</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7234">RFC 7234 - HTTP/1.1: Caching</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7235">RFC 7235 - HTTP/1.1: Authentication</a></li>
						</ul>
					</section>
					<section>
						<h2>HTTP/2 RFCs</h2>
						<ul>
							<li><a href="http://tools.ietf.org/html/rfc7540">RFC 7540 - HTTP/2</a></li>
							<li><a href="http://tools.ietf.org/html/rfc7541">RFC 7541 - HPACK - Header Compression for HTTP/2</a></li>
						</ul>
					</section>
				</section>
			</div>


		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
